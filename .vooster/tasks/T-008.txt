# 카카오톡/이메일/Slack 자동 알림 기능

**Task ID:** T-008
**Status:** DONE
**Importance:** MUST
**Complexity:** 6/10
**Urgency:** 8/10
**Dependencies:** T-006

## Description

### 설명
예약, 상담 신청 등 주요 이벤트 발생 시, 관련자(사용자, 병원 스태프)에게 카카오톡, 이메일, Slack을 통해 자동으로 알림을 전송하는 시스템을 구축합니다. 이를 통해 예약 확정 정보를 사용자에게 전달하고, 내부적으로는 신규 리드를 실시간으로 공유합니다.

### 구현 상세
1.  **알림용 Edge Function 개발**: TRD의 `send-reservation-notification` 예시를 기반으로, 다양한 유형의 알림을 처리할 수 있는 중앙화된 Supabase Edge Function을 개발합니다.
2.  **외부 API 연동**: 함수 내에서 카카오톡 비즈메시지 API, Resend(이메일), Slack Incoming Webhooks API 클라이언트를 초기화합니다. 각 API 키는 Supabase 환경 변수로 관리합니다.
3.  **데이터베이스 트리거 설정**: `reservations` 테이블에 새로운 행이 `INSERT`될 때마다 위에서 만든 Edge Function을 자동으로 호출하는 데이터베이스 트리거(또는 Webhook)를 설정합니다.
4.  **메시지 템플릿 관리**: 각 채널(카카오톡 알림톡, 이메일, Slack)에 맞는 메시지 템플릿을 작성합니다. 함수는 트리거로부터 전달받은 데이터(예: 환자 이름, 예약 시간)를 템플릿에 동적으로 채워넣어 메시지를 완성합니다.

### 테스트 전략
1.  **알림 수신 테스트**: 테스트 예약을 생성했을 때, 사용자의 카카오톡/이메일과 병원 내부 Slack 채널에 알림이 즉시 도착하는지 확인합니다.
2.  **메시지 정확도 검증**: 수신된 알림 메시지의 내용(이름, 날짜, 시간 등)이 예약 정보와 100% 일치하는지 확인합니다.
3.  **채널별 테스트**: 각 채널(카카오톡, 이메일, Slack)이 개별적으로 또는 동시에 정상적으로 발송되는지 시나리오별로 테스트합니다.
4.  **실패 시나리오 테스트**: 외부 API 호출이 실패했을 경우, 에러가 기록되고 재시도 로직(필요시)이 동작하는지 확인합니다.

---

**Created:** 2025-07-29T04:44:49.562Z
**Updated:** 2025-08-10T23:40:08.633Z
